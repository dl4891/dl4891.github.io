const voti_52_0x28287d=voti_52_0x38c1;function voti_52_0x38c1(_0x1239a5,_0x33bd3f){const _0x2e172c=voti_52_0x2e17();return voti_52_0x38c1=function(_0x38c105,_0x2d3c64){_0x38c105=_0x38c105-0x16b;let _0x578c3a=_0x2e172c[_0x38c105];return _0x578c3a;},voti_52_0x38c1(_0x1239a5,_0x33bd3f);}function voti_52_0x2e17(){const _0x4b6cd1=['B2_custoMaterialComIPI','B75_valorDespesasFixas','servicosDetalhes','reduce','ufRevendaNormal','B61_aliqIntConsumidor','2057904nAXKCr','B58_aliqSPNaoContrib','B99_valorIPI','vendaEstaleiro','ufGrade','418616eHQeSx','fretePerc','ipiMaterial','B86_pis','50876UVzxMt','ufGrampo','B4_valorIPIMaterial','B47_aliqIntGrampo','B39_icmsSTBrutoTotal','Quando\x20IPI\x20na\x20Revenda\x20>\x200,\x20IPI\x20Venda\x20Final\x20deve\x20ser\x200','B52_aliqIntTelas','B74_despesasFixas','despesasFinanceiras','B11_somaServicos','B68_vendaEstaleiro','B49_ivaGrampo','B62_aliqSPConsumidor','vendaExportacao','2OFdOsi','B35_baseICMSST','valid','B79_valorComissoesInternas','revenda','B78_comissoesInternas','B91_freteValor','comissoesInternas','taxaEnergiaQtde','calculatePrice','250152HrKPCq','B82_icmsOpPropria','B12_servicoTotal','aliq_sp','ipiVendaFinal','B1_custoMaterial','B87_valorPIS','B89_valorCSLLIRPJ','B80_despesasFinanceiras','B43_aliqSPGrade','5mZXAjj','B69_vendaExportacao','qty','ufNaoContribuinte','tipoOperacao','296sCzSZb','getAliquotaByUF','B83_valorICMSOpPropria','B96_valorDifal','B76_comissoesRepres','B93_valorAntesMercadoria','B36_baseICMSSTTotal','B42_aliqIntGrade','mva_telas','Quando\x20IPI\x20Material\x20>\x200,\x20IPI\x20Venda\x20Final\x20deve\x20ser\x20>\x200','B81_valorDespesasFinanceiras','3228348oEKWZT','B66_aliqSPRevenda','B98_ipiVenda','B7_ipiRevenda','B77_valorComissoesRepres','determineOperationType','B102_valorFinalComIPIST','Quando\x20IPI\x20Material\x20>\x200,\x20IPI\x20na\x20Revenda\x20deve\x20ser\x200','B38_icmsSTBruto','B84_cofins','ufConsumidorFinal','B32_taxaEnergiaTotal','icmsMaterial','B8_valorIPIRevenda','B5_icmsMaterial','ufTelas','freteValor','getMVAByUF','validateIPIRules','despesasFixas','B48_aliqSPGrampo','B92_percAntesMercadoria','Quando\x20IPI\x20na\x20Revenda\x20>\x200,\x20IPI\x20Material\x20deve\x20ser\x200','materiaisDetalhes','ipiRevenda','B6_valorICMSMaterial','B95_difal','B3_ipiMaterial','grade','B94_valorMercadoria','B72_lucroLiquido','B34_custoLiquido','B97_precoVendaComDifal','B54_ivaTelas','313480MEwdbN','stCompraQtde','venda','B73_valorLucroLiquido','aliq_int','unit','B65_aliqIntRevenda','30372HTiizS','63uOLJHr','taxaEnergiaUnit','B57_aliqIntNaoContrib','B53_aliqSPTelas','77gWLLZp','B10_servicoConstante','B88_csllIrpj','B101_valorDifST','B90_fretePerc','grampo','B85_valorCOFINS','B28_stCompraTotal'];voti_52_0x2e17=function(){return _0x4b6cd1;};return voti_52_0x2e17();}(function(_0x3ac0c3,_0x3d5272){const _0x51eea8=voti_52_0x38c1,_0xf356b0=_0x3ac0c3();while(!![]){try{const _0x5c719c=-parseInt(_0x51eea8(0x183))/0x1+-parseInt(_0x51eea8(0x195))/0x2*(-parseInt(_0x51eea8(0x16b))/0x3)+parseInt(_0x51eea8(0x17e))/0x4+parseInt(_0x51eea8(0x1a9))/0x5*(parseInt(_0x51eea8(0x1b9))/0x6)+parseInt(_0x51eea8(0x187))/0x7*(-parseInt(_0x51eea8(0x1ae))/0x8)+-parseInt(_0x51eea8(0x16c))/0x9*(parseInt(_0x51eea8(0x1db))/0xa)+-parseInt(_0x51eea8(0x170))/0xb*(-parseInt(_0x51eea8(0x19f))/0xc);if(_0x5c719c===_0x3d5272)break;else _0xf356b0['push'](_0xf356b0['shift']());}catch(_0x3b0c9d){_0xf356b0['push'](_0xf356b0['shift']());}}}(voti_52_0x2e17,0x49a2c));import{UF_DATA}from'../shared/config.js';export class CalculationEngine{static[voti_52_0x28287d(0x1af)](_0x4e68e6,_0x5e79b4){const _0xafce19=voti_52_0x28287d;if(!_0x4e68e6||!UF_DATA[_0x4e68e6])return 0x0;switch(_0x5e79b4){case _0xafce19(0x1df):return UF_DATA[_0x4e68e6][_0xafce19(0x1df)];case _0xafce19(0x1a2):return UF_DATA[_0x4e68e6][_0xafce19(0x1a2)];default:return 0x0;}}static[voti_52_0x28287d(0x1ca)](_0x7d0b0c,_0x5eee31){const _0x5d41bb=voti_52_0x28287d;if(!_0x7d0b0c||!UF_DATA[_0x7d0b0c])return 0x0;switch(_0x5eee31){case _0x5d41bb(0x1d5):return UF_DATA[_0x7d0b0c]['mva_grade'];case _0x5d41bb(0x175):return UF_DATA[_0x7d0b0c]['mva_grampo'];case'telas':return UF_DATA[_0x7d0b0c][_0x5d41bb(0x1b6)];default:return 0x0;}}static[voti_52_0x28287d(0x1cb)](_0x20f0b8){const _0x4ecd46=voti_52_0x28287d,{ipiMaterial:ipiMaterial=0x0,ipiRevenda:ipiRevenda=0x0,ipiVendaFinal:ipiVendaFinal=0x0}=_0x20f0b8;if(ipiMaterial>0x0){if(ipiRevenda>0x0)return{'valid':![],'error':_0x4ecd46(0x1c0),'fields':[_0x4ecd46(0x185),_0x4ecd46(0x1d1)]};if(ipiVendaFinal===0x0)return{'valid':![],'error':_0x4ecd46(0x1b7),'fields':[_0x4ecd46(0x185),'ipiVendaFinal']};}if(ipiRevenda>0x0){if(ipiMaterial>0x0)return{'valid':![],'error':_0x4ecd46(0x1cf),'fields':['ipiRevenda',_0x4ecd46(0x185)]};if(ipiVendaFinal>0x0)return{'valid':![],'error':_0x4ecd46(0x18c),'fields':[_0x4ecd46(0x1d1),_0x4ecd46(0x1a3)]};}return{'valid':!![],'error':null,'fields':[]};}static[voti_52_0x28287d(0x1be)](_0x2fddfb){const _0x39e3ab=voti_52_0x28287d,_0x1be206=_0x2fddfb[_0x39e3ab(0x1d1)]||0x0;return _0x1be206>0x0?_0x39e3ab(0x199):'venda';}static[voti_52_0x28287d(0x19e)](_0x29d1dd){const _0x3ee041=voti_52_0x28287d,_0x31d29a=this[_0x3ee041(0x1cb)](_0x29d1dd);if(!_0x31d29a[_0x3ee041(0x197)])throw new Error('Erro\x20de\x20validação\x20IPI:\x20'+_0x31d29a['error']);const _0x399e04={},_0x35436d=this['determineOperationType'](_0x29d1dd);return _0x399e04[_0x3ee041(0x1ad)]=_0x35436d,_0x399e04[_0x3ee041(0x1a4)]=_0x29d1dd[_0x3ee041(0x1d0)][_0x3ee041(0x17b)]((_0x15af4b,_0xfa613f)=>_0x15af4b+_0xfa613f[_0x3ee041(0x1ab)]*_0xfa613f[_0x3ee041(0x1e0)],0x0),_0x399e04[_0x3ee041(0x1d0)]=_0x29d1dd[_0x3ee041(0x1d0)],_0x399e04[_0x3ee041(0x1c7)]=_0x29d1dd[_0x3ee041(0x1c5)]/0x64,_0x399e04[_0x3ee041(0x191)]=_0x29d1dd[_0x3ee041(0x181)]||![],_0x399e04[_0x3ee041(0x1aa)]=_0x29d1dd[_0x3ee041(0x194)]||![],_0x35436d===_0x3ee041(0x1dd)?(_0x399e04['B3_ipiMaterial']=(_0x29d1dd[_0x3ee041(0x185)]||0x0)/0x64,_0x399e04[_0x3ee041(0x1bc)]=0x0,_0x399e04[_0x3ee041(0x1bb)]=(_0x29d1dd[_0x3ee041(0x1a3)]||0x0)/0x64):(_0x399e04[_0x3ee041(0x1d4)]=0x0,_0x399e04[_0x3ee041(0x1bc)]=(_0x29d1dd[_0x3ee041(0x1d1)]||0x0)/0x64,_0x399e04[_0x3ee041(0x1bb)]=0x0),_0x399e04[_0x3ee041(0x178)]=_0x399e04[_0x3ee041(0x1a4)]*_0x399e04[_0x3ee041(0x1d4)]+_0x399e04[_0x3ee041(0x1a4)],_0x399e04['B4_valorIPIMaterial']=_0x399e04[_0x3ee041(0x191)]?0x0:_0x399e04[_0x3ee041(0x1a4)]*_0x399e04[_0x3ee041(0x1d4)],_0x399e04[_0x3ee041(0x1d2)]=_0x399e04[_0x3ee041(0x191)]?0x0:_0x399e04['B1_custoMaterial']*_0x399e04[_0x3ee041(0x1c7)],_0x399e04[_0x3ee041(0x1c6)]=_0x399e04[_0x3ee041(0x1a4)]*_0x399e04[_0x3ee041(0x1bc)],_0x399e04[_0x3ee041(0x171)]=0x1,_0x399e04[_0x3ee041(0x190)]=_0x29d1dd[_0x3ee041(0x17a)]['reduce']((_0x33635a,_0x25f0bb)=>_0x33635a+_0x25f0bb[_0x3ee041(0x1ab)]*_0x25f0bb[_0x3ee041(0x1e0)],0x0),_0x399e04[_0x3ee041(0x1a1)]=_0x399e04['B10_servicoConstante']*_0x399e04[_0x3ee041(0x190)],_0x399e04[_0x3ee041(0x17a)]=_0x29d1dd['servicosDetalhes'],_0x399e04[_0x3ee041(0x177)]=(_0x29d1dd[_0x3ee041(0x1dc)]||0x0)*(_0x29d1dd['stCompraUnit']||0x0),_0x399e04[_0x3ee041(0x1c4)]=(_0x29d1dd[_0x3ee041(0x19d)]||0x0)*(_0x29d1dd[_0x3ee041(0x16d)]||0x0),_0x399e04['B34_custoLiquido']=_0x399e04['B2_custoMaterialComIPI']-_0x399e04[_0x3ee041(0x189)]-_0x399e04[_0x3ee041(0x1d2)]+_0x399e04[_0x3ee041(0x1c6)]+_0x399e04[_0x3ee041(0x1a1)]+_0x399e04[_0x3ee041(0x177)]+_0x399e04['B32_taxaEnergiaTotal'],_0x399e04[_0x3ee041(0x182)]=_0x29d1dd[_0x3ee041(0x182)]||'',_0x399e04[_0x3ee041(0x188)]=_0x29d1dd[_0x3ee041(0x188)]||'',_0x399e04['ufTelas']=_0x29d1dd[_0x3ee041(0x1c8)]||'',_0x399e04[_0x3ee041(0x1ac)]=_0x29d1dd['ufNaoContribuinte']||'',_0x399e04['ufConsumidorFinal']=_0x29d1dd[_0x3ee041(0x1c3)]||'',_0x399e04['ufRevendaNormal']=_0x29d1dd[_0x3ee041(0x17c)]||'',_0x399e04[_0x3ee041(0x1b5)]=this['getAliquotaByUF'](_0x399e04[_0x3ee041(0x182)],_0x3ee041(0x1df)),_0x399e04[_0x3ee041(0x1a8)]=this['getAliquotaByUF'](_0x399e04[_0x3ee041(0x182)],_0x3ee041(0x1a2)),_0x399e04['B44_ivaGrade']=this[_0x3ee041(0x1ca)](_0x399e04[_0x3ee041(0x182)],'grade'),_0x399e04['B47_aliqIntGrampo']=this['getAliquotaByUF'](_0x399e04[_0x3ee041(0x188)],_0x3ee041(0x1df)),_0x399e04[_0x3ee041(0x1cd)]=this[_0x3ee041(0x1af)](_0x399e04[_0x3ee041(0x188)],'aliq_sp'),_0x399e04[_0x3ee041(0x192)]=this['getMVAByUF'](_0x399e04[_0x3ee041(0x188)],'grampo'),_0x399e04[_0x3ee041(0x18d)]=this['getAliquotaByUF'](_0x399e04[_0x3ee041(0x1c8)],'aliq_int'),_0x399e04[_0x3ee041(0x16f)]=this[_0x3ee041(0x1af)](_0x399e04['ufTelas'],_0x3ee041(0x1a2)),_0x399e04[_0x3ee041(0x1da)]=this[_0x3ee041(0x1ca)](_0x399e04[_0x3ee041(0x1c8)],'telas'),_0x399e04['B57_aliqIntNaoContrib']=this[_0x3ee041(0x1af)](_0x399e04['ufNaoContribuinte'],_0x3ee041(0x1df)),_0x399e04[_0x3ee041(0x17f)]=this['getAliquotaByUF'](_0x399e04[_0x3ee041(0x1ac)],'aliq_sp'),_0x399e04[_0x3ee041(0x17d)]=this[_0x3ee041(0x1af)](_0x399e04[_0x3ee041(0x1c3)],'aliq_int'),_0x399e04[_0x3ee041(0x193)]=this[_0x3ee041(0x1af)](_0x399e04[_0x3ee041(0x1c3)],_0x3ee041(0x1a2)),_0x399e04[_0x3ee041(0x1e1)]=this[_0x3ee041(0x1af)](_0x399e04[_0x3ee041(0x17c)],_0x3ee041(0x1df)),_0x399e04[_0x3ee041(0x1ba)]=this['getAliquotaByUF'](_0x399e04[_0x3ee041(0x17c)],_0x3ee041(0x1a2)),_0x399e04[_0x3ee041(0x196)]=_0x399e04['B44_ivaGrade']+_0x399e04[_0x3ee041(0x192)]+_0x399e04[_0x3ee041(0x1da)],_0x399e04[_0x3ee041(0x1d7)]=(_0x29d1dd['lucroLiquido']||0x0)/0x64,_0x399e04['B74_despesasFixas']=(_0x29d1dd[_0x3ee041(0x1cc)]||0x0)/0x64,_0x399e04[_0x3ee041(0x1b2)]=(_0x29d1dd['comissoesRepres']||0x0)/0x64,_0x399e04[_0x3ee041(0x19a)]=(_0x29d1dd[_0x3ee041(0x19c)]||0x0)/0x64,_0x399e04[_0x3ee041(0x1a7)]=(_0x29d1dd[_0x3ee041(0x18f)]||0x0)/0x64,_0x399e04[_0x3ee041(0x172)]=(_0x29d1dd['csllIrpj']||0x0)/0x64,_0x399e04[_0x3ee041(0x174)]=(_0x29d1dd[_0x3ee041(0x184)]||0x0)/0x64,_0x399e04[_0x3ee041(0x19b)]=_0x29d1dd[_0x3ee041(0x1c9)]||0x0,_0x399e04[_0x3ee041(0x1a0)]=(_0x399e04[_0x3ee041(0x1a8)]+_0x399e04[_0x3ee041(0x1cd)]+_0x399e04[_0x3ee041(0x16f)]+_0x399e04[_0x3ee041(0x17f)]+_0x399e04['B62_aliqSPConsumidor']+_0x399e04[_0x3ee041(0x1ba)])/0x64,_0x399e04[_0x3ee041(0x1c2)]=_0x399e04[_0x3ee041(0x191)]||_0x399e04['B69_vendaExportacao']?0x0:0.03,_0x399e04[_0x3ee041(0x186)]=_0x399e04[_0x3ee041(0x191)]||_0x399e04['B69_vendaExportacao']?0x0:0.0065,_0x399e04[_0x3ee041(0x1ce)]=_0x399e04[_0x3ee041(0x1d7)]+_0x399e04[_0x3ee041(0x18e)]+_0x399e04['B76_comissoesRepres']+_0x399e04['B78_comissoesInternas']+_0x399e04[_0x3ee041(0x1a7)]+_0x399e04[_0x3ee041(0x1a0)]+_0x399e04[_0x3ee041(0x1c2)]+_0x399e04['B86_pis']+_0x399e04[_0x3ee041(0x172)]+_0x399e04['B90_fretePerc'],_0x399e04[_0x3ee041(0x1d6)]=_0x399e04[_0x3ee041(0x1d8)]/(0x1-_0x399e04[_0x3ee041(0x1ce)])+_0x399e04[_0x3ee041(0x19b)],_0x399e04[_0x3ee041(0x1de)]=_0x399e04[_0x3ee041(0x1d6)]*_0x399e04[_0x3ee041(0x1d7)],_0x399e04[_0x3ee041(0x179)]=_0x399e04['B94_valorMercadoria']*_0x399e04[_0x3ee041(0x18e)],_0x399e04['B77_valorComissoesRepres']=_0x399e04['B94_valorMercadoria']*_0x399e04['B76_comissoesRepres'],_0x399e04[_0x3ee041(0x198)]=_0x399e04[_0x3ee041(0x1d6)]*_0x399e04[_0x3ee041(0x19a)],_0x399e04[_0x3ee041(0x1b8)]=_0x399e04[_0x3ee041(0x1d6)]*_0x399e04[_0x3ee041(0x1a7)],_0x399e04[_0x3ee041(0x1a6)]=_0x399e04['B94_valorMercadoria']*_0x399e04[_0x3ee041(0x172)],_0x399e04[_0x3ee041(0x180)]=_0x399e04['B68_vendaEstaleiro']||_0x399e04[_0x3ee041(0x1aa)]?0x0:_0x399e04[_0x3ee041(0x1d6)]*_0x399e04[_0x3ee041(0x1bb)],_0x399e04['B36_baseICMSSTTotal']=_0x399e04[_0x3ee041(0x196)]>0x0?(_0x399e04['B94_valorMercadoria']+_0x399e04[_0x3ee041(0x180)])*_0x399e04[_0x3ee041(0x196)]:0x0,_0x399e04[_0x3ee041(0x1c1)]=(_0x399e04[_0x3ee041(0x1b5)]+_0x399e04[_0x3ee041(0x18a)]+_0x399e04[_0x3ee041(0x18d)])/0x64,_0x399e04['B39_icmsSTBrutoTotal']=_0x399e04[_0x3ee041(0x1b4)]*_0x399e04['B38_icmsSTBruto'],_0x399e04[_0x3ee041(0x16e)]+_0x399e04['B61_aliqIntConsumidor']>0x0?_0x399e04[_0x3ee041(0x1b0)]=(_0x399e04[_0x3ee041(0x1d6)]+_0x399e04[_0x3ee041(0x180)])*_0x399e04[_0x3ee041(0x1a0)]:_0x399e04[_0x3ee041(0x1b0)]=_0x399e04['B94_valorMercadoria']*_0x399e04[_0x3ee041(0x1a0)],_0x399e04[_0x3ee041(0x176)]=(_0x399e04[_0x3ee041(0x1d6)]-_0x399e04[_0x3ee041(0x1b0)])*_0x399e04['B84_cofins'],_0x399e04[_0x3ee041(0x1a5)]=(_0x399e04['B94_valorMercadoria']-_0x399e04['B83_valorICMSOpPropria'])*_0x399e04['B86_pis'],_0x399e04[_0x3ee041(0x1d3)]=_0x399e04[_0x3ee041(0x16e)]/0x64,_0x399e04['B96_valorDifal']=_0x399e04[_0x3ee041(0x16e)]>0x0?(_0x399e04[_0x3ee041(0x1d6)]+_0x399e04[_0x3ee041(0x180)])*_0x399e04[_0x3ee041(0x1d3)]-_0x399e04[_0x3ee041(0x1b0)]:0x0,_0x399e04[_0x3ee041(0x1d9)]=_0x399e04[_0x3ee041(0x1d6)]+_0x399e04[_0x3ee041(0x1b1)],_0x399e04['B101_valorDifST']=_0x399e04[_0x3ee041(0x18b)]>0x0?_0x399e04[_0x3ee041(0x18b)]-_0x399e04[_0x3ee041(0x1b0)]:0x0,_0x399e04['B100_difST']=_0x399e04['B94_valorMercadoria']>0x0?_0x399e04[_0x3ee041(0x173)]/_0x399e04[_0x3ee041(0x1d6)]:0x0,_0x399e04[_0x3ee041(0x1bf)]=_0x399e04[_0x3ee041(0x1d9)]+_0x399e04[_0x3ee041(0x180)]+_0x399e04['B101_valorDifST'],_0x399e04[_0x3ee041(0x1b3)]=_0x399e04[_0x3ee041(0x1de)]+_0x399e04[_0x3ee041(0x179)]+_0x399e04[_0x3ee041(0x1bd)]+_0x399e04[_0x3ee041(0x198)]+_0x399e04[_0x3ee041(0x1b8)]+_0x399e04[_0x3ee041(0x1b0)]+_0x399e04['B85_valorCOFINS']+_0x399e04[_0x3ee041(0x1a5)]+_0x399e04[_0x3ee041(0x1a6)]+_0x399e04[_0x3ee041(0x19b)],_0x399e04;}}